# Maxx External Integration Plugin (ExtIntMaxx)

ExtIntMaxx is a Moodle activity module that enables integration with external learning providers (such as ACCI Lifeskills) for seamless grade synchronization and external course usage. Our goal is to provide learners with easy access to new opportunities, while ensuring the experience for course administrators is simple.

## Features

- **Automatic Grade Sync**: Scheduled tasks automatically synchronize grades from external providers.
- **Provider Credentials Management**: Admin interface manage credentials for multiple profiles.
- **Student Enrollment**: New students are automatically enrolled into provider courses with no need for user input.
- **Comprehensive Reporting**: Full reporting capabilities for instructors and administrators.
- **Single-Sign-On**: Single-sign-on support for ACCI learners for quick access to courses and learning.

## Installation

### Zip File Download (Recommended)
1. Download this plugin as a .zip file
2. Visit your Moodle "Site Administration" page -> "Plugins" tab -> "Install Plugins"
3. Drag or Select the "extintmaxx-main.zip" file next to "ZIP Package"
4. Under "Show more", set the plugin type to "Activity Module (Mod)"
5. Enter " extintmaxx " into the "Rename the Root Directory" text box
6. Click the Install plugin from the ZIP file and follow all onscreen prompts
7. Navigate to **Site administration -> Plugins -> Maxx External Integration Settings** to configure new profiles

## Usage

### Admin Setup

1. Go to **Site administration -> Plugins -> Maxx External Integration Settings**
2. Create a new profile with the following information:
    - **Profile Name**: A descriptive name for this provider configuration (Will be shown in course)
    - **Provider**: Select from available providers (ACCI Lifeskills)
    - **Provider Username**: Admin username for the external provider
    - **Provider Password**: Admin password for the external provider
    - **Environment URL** (Optional): For sandbox/non-production environments
3. Click the insert provider credentials button

### Course Setup

1. Add a Maxx External Integration activity to your course
2. Under the "Maxx External Integration Settings" section, select the provider course you want to integrate
3. Under the "Grading" section, input the number of points this activity will be worth
4. Save and publish the activity

### Student Enrollment

The learner is automatically self-enrolled into the provider's course when it is first opened on their Moodle account. It uses the information required to set up their Moodle user account to enroll them into the course automatically. This information includes the user's:
- Email
- First Name
- Last Name
Other required information is automatically generated by the plugin.

### Student Auto-Login

After a learner's first login, the plugin will automatically log them back into the desired course. The student doesn't have to remember any login information, allowing for quick, easy, and secure access for learners using these external course providers.

## Supported Providers

- **ACCI Lifeskills**: Full integration support for ACCI Lifeskills provider
- *North American Learning Institute (NALI)*: Integration planned, Coming soon

## Scheduled Tasks

The plugin includes an automatic grade check task:

1. **Timed Grade Check** (`\mod_extintmaxx\task\timed_grade_check`): 
    - Automated extension of the ACCI Grade Check task
    - Grade synchronization task
    - Runs on a configurable schedule

2. **ACCI Grade Check** (`\mod_extintmaxx\task\acci_grade_check`): 
    - Runs the ACCI grade check methods
    - Synchronizes completion grades from ACCI with the Moodle gradebook
    - Runs adhoc (Unscheduled)
To manage these tasks, go to **Site administration -> Server -> Scheduled tasks**.

## Capabilities

The plugin defines the following capabilities:

- `mod/extintmaxx:fullreporting` - Access full reporting features (allowed for editing teachers, course creators, managers)

## File Structure

```
mod_extintmaxx/
├── classes/
│   ├── providers/
│   │   ├── acci.php              # ACCI provider API implementation
│   │   └── provider_api_method_chains.php  # Base class for most provider API method chains
│   └── task/
│       ├── acci_grade_check.php  # ACCI specific grade check adhoc task
│       └── timed_grade_check.php # Scheduled task for general grade checks
├── db/
│   ├── access.php                # Capability definitions
│   ├── install.xml               # Database schema
│   ├── tasks.php                 # Scheduled tasks definition
│   └── upgrade.php               # Upgrade scripts
├── lang/
│   └── en/
│       └── extintmaxx.php        # English language strings
├── lib/
│   └── amd/
│       └── src/
│           └── formupdate.js     # JavaScript for dynamic form updates (currently unused)
├── pix/                          # Plugin icons and images
├── admin_actions_form.php        # Form for admin to select view (unused)
├── lib.php                       # Core plugin hooks and functions
├── manage_form.php               # Admin profile management form
├── manage_settings.php           # Page/Logic for processing manage form
├── mod_form.php                  # Activity creation/editing form
├── process_grade_update.php      # Grade processing logic
├── reporting.php                 # Reporting page
├── reporting_form.php            # Reporting filters/options (Unused)
├── settings.php                  # Admin settings page configuration
├── version.php                   # Plugin metadata
└── view.php                      # Student-facing activity view
```

## Database Tables

The plugin creates the following tables:

- `extintmaxx` - Main activity instances
- `extintmaxx_admin` - Admin provider profiles/credentials
- `extintmaxx_provider` - Provider courses
- `extintmaxx_user` - User OAuth and SSO information

## Requirements

- Moodle 4.1 or later
- Minimum Language and Database requirements of desired Moodle version

## License

This plugin is released under the GNU General Public License (GPL) v3 or later.

## Support

For issues, feature requests, or contributions, please visit the plugin repository on GitHub.
